extends layout

block header
	link(rel='stylesheet', href='/css/style.css')
	link(rel='stylesheet', href='http://fonts.googleapis.com/css?family=Lobster+Two:400italic|Open+Sans:300,400', type='text/css')
	script(type='text/javascript', src='https://maps.googleapis.com/maps/api/js?sensor=true&libraries=places,visualization')

block content
	#content-wrapper.row
		#sidebar.col.s3
			.content
				a(href='/', style='color: #fff;')
					h1.logo Friendwagon
				img#host.avatar.center-align.z-depth-2(src='https://2.gravatar.com/avatar/767fc9c115a1b989744c755db47feb60?s=132&d=wavatar')
				p#hostName Hosted by Fname Lname
					i.mdi-social-person.left
				p#destination Destination
					i.mdi-maps-pin-drop.left
				p#date Date
					i.mdi-device-access-time.left
		#map-wrapper.left.col.s9
			#map_canvas
			#people
				h1 Guests
				hr
				.row
					#guestWrapper.container
						.col.s3
							img.avatar(src='https://2.gravatar.com/avatar/767fc9c115a1b989744c755db47feb60?s=132&d=wavatar')
							p NAME 1
						.col.s3
							img.avatar(src='https://2.gravatar.com/avatar/767fc9c115a1b989744c755db47feb60?s=132&d=wavatar')
							p NAME 2
						.col.s3
							img.avatar(src='https://2.gravatar.com/avatar/767fc9c115a1b989744c755db47feb60?s=132&d=wavatar')
							p NAME 3
						.col.s3
							img.avatar(src='https://2.gravatar.com/avatar/767fc9c115a1b989744c755db47feb60?s=132&d=wavatar')
							p NAME 4
			include footer.jade

	script(src='/js/gmaps.js')

	script.
		$(document).ready(function() {
			$('#sidebar').css('height', $(document).height() + 'px');
			var tripData, userData;
			$.ajax({
				url: 'http://s4.jagels.io:3000/trips',
				success: function(data) {
					$.each(data, function(index, value) {
						if(value._id === req.params.id) {
							tripData = value;
							return;
						}
					});
				},
				type: 'GET'
			});
			$.ajax({
				url: 'http://s4.jagels.io:3000/users/u/' + tripData.userid,
				success: function(data) {
					userData = data[0];
				},
				type: 'GET'
			});
			$('p#hostName').text(userData.name);
			$('p#destination').text(tripData.destination);
			var d = new Date(0);
			d.setUTCSeconds(tripData.time);
			$('p#date').text(d);
			$('img#host').attr('src', 'https://2.gravatar.com/avatar/' + userData.emailhash + '?s=132&d=wavatar');
		});